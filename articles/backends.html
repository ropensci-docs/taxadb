<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="taxadb">
<title>Backends for taxadb • taxadb</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Backends for taxadb">
<meta property="og:description" content="taxadb">
<meta property="og:image" content="https://docs.ropensci.org/taxadb/logo.svg">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">taxadb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.1.99</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro.html">Tutorial for taxadb</a>
    <a class="dropdown-item" href="../articles/backends.html">Backends for taxadb</a>
    <a class="dropdown-item" href="../articles/data-sources.html">Name Providers and schema used in taxadb</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/taxadb/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Backends for taxadb</h1>
                        <h4 data-toc-skip class="author">Carl Boettiger, Kari Norman</h4>
            
            <h4 data-toc-skip class="date">2024-03-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/taxadb/blob/HEAD/vignettes/backends.Rmd" class="external-link"><code>vignettes/backends.Rmd</code></a></small>
      <div class="d-none name"><code>backends.Rmd</code></div>
    </div>

    
    
<p><code>taxadb</code> is designed to work with a variety of different “backends” – software that works under the hood to store and retrieve the requested data. <code>taxadb</code> has an intelligent default method selector which will attempt to use the best method available on your system, which means you can use <code>taxadb</code> without having to worry about these details. However, to improve performance of <code>taxadb</code>, becoming familiar with these backends can yield significant improvements in performance.</p>
<div class="section level2">
<h2 id="rsqlite">RSQLite<a class="anchor" aria-label="anchor" href="#rsqlite"></a>
</h2>
<p><code>RSQLite</code> is the default database backend if no suggested backend is detected. <code>RSQLite</code> has no external software dependencies and will be automatically installed with <code>taxadb</code> (it is a hard dependency as an imported rather than suggested package). The term <code>Lite</code> indicates that SQLite does not require the separate “server” and “client” software model found on traditional databases such as MySQL, and SQLite is widely used in consumer software everywhere. RSQLite packages SQLite for R. It enables persistent local storage for R applications but will be slower than the alternatives. For certain operations it can be significantly slower.</p>
</div>
<div class="section level2">
<h2 id="monetdblite-duckdb">MonetDBLite &amp; duckdb<a class="anchor" aria-label="anchor" href="#monetdblite-duckdb"></a>
</h2>
<p><code>MonetDBLite</code> is a modern alternative to <code>RSQLite</code>. <code>MonetDBLite</code> is both more powerful than SQLite (in supporting a greater array of operations), and can run much faster. Filtering joins in particular can be much faster even than the in-memory operations of <code>dplyr</code>. Because filtering joins lie at the heart of many <code>taxadb</code> functions this can yield substantial improvements in performance. Unfortunately, the R interface, <code>MonetDBLite</code> was removed from CRAN in April 2019. The package can still be installed from GitHub by running <code>devtools::install_github("hannesmuehleisen/MonetDBLite-R")</code>, though this requires the appropriate compilers. The developer plans to replace MonetDBLite with <code>duckdb</code>, (see <a href="https://github.com/duckdb/duckdb" class="external-link uri">https://github.com/duckdb/duckdb</a>), but this is not yet feature complete and thus not yet fully compatible for <code>taxadb</code> use. Because installation is more difficult, <code>MonetDBLite</code> is not a required dependency, but will be used by default if <code>taxadb</code> detects an existing installation. <code>duckdb</code> support will be switched on as the first priority in the method waterfall.</p>
</div>
<div class="section level2">
<h2 id="in-memory">in-memory<a class="anchor" aria-label="anchor" href="#in-memory"></a>
</h2>
<p><code>taxadb</code> can also be set to use in-memory only, without a backend. (Note that this is distinct from using <code>RSQlite</code> or <code>MonetDBLite</code> with over <code>in-memory</code> mode, because it uses only native R <code>data.frame</code>s to store data). This will tend to be faster that <code>RSQLite</code> but slower than <code>MonetDBLite</code> or <code>duckdb</code>. In this mode, data will persist over a single session but not between sessions (since memory is cleared when the user quits out of R). Note that many taxonomic tables are quite large when uncompressed, and users with less than 8-16GB of free RAM may find their machine becomes slow or unresponsive in this mode.</p>
</div>
<div class="section level2">
<h2 id="manual-control-of-the-backend-engine">Manual control of the backend engine<a class="anchor" aria-label="anchor" href="#manual-control-of-the-backend-engine"></a>
</h2>
<p>Users can override the automatic preferences of <code>taxadb</code> by setting the environmental variable <code>TAXADB_DRIVER</code>. For example, running <code>Sys.setenv(TAXADB_DRIVER="RSQLite")</code> will make <code>RSQLite</code> the default driver, even if <code>MonetDBLite</code> is installed.</p>
</div>
<div class="section level2">
<h2 id="local-storage">Local storage<a class="anchor" aria-label="anchor" href="#local-storage"></a>
</h2>
<p>The first time <code>taxadb</code> accesses a data source, it will download and store the full dataset from that provider. Users can trigger a download ahead of time by running <code><a href="../reference/td_create.html">td_create()</a></code>, e.g. <code>td_create("fb")</code> will create a local copy of the FishBase taxonomy. If a user does not call <code><a href="../reference/td_create.html">td_create()</a></code> first, <code>taxadb</code> simply downloads the data the first time that provider is queried – e.g. <code>filter_name("Homo sapiens", "gibf")</code> will first download and install GBIF if that has not been done already. These download and install operations may be slow depending on your internet connection, but need be performed only once. Downloaded data is stored on your local harddisk and will persist between R sessions. The default location depends on the default set by your operating system (see the <code>rappdirs</code> package). Users can configure this location by setting the environmental variable <code>TAXADB_HOME</code>. For example, all unit tests in the package use temporary storage by setting <code>Sys.setenv(TAXADB_HOME=tempdir())</code>, which is cleared out after the R session ends.</p>
<p>A user can install all available name providers up front with <code>td_create("all")</code>. An overview of the available scientific name providers is found in the providers vignette.</p>
</div>
<div class="section level2">
<h2 id="other-backends">Other backends<a class="anchor" aria-label="anchor" href="#other-backends"></a>
</h2>
<p><code>taxadb</code> will work just as well with any <code>DBI</code>-compatible database backend (Postgres, MariaDB, etc). All <code>taxadb</code> functions take an argument <code>taxadb_db</code>, which is just a <code>DBI</code> connection used by <code>dplyr</code>. For example, we can create an in-memory RSQLite connection and use that to store data for a single session:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">":memory:"</span><span class="op">)</span></span>
<span><span class="fu">taxadb</span><span class="fu">::</span><span class="fu"><a href="../reference/get_ids.html">get_ids</a></span><span class="op">(</span><span class="st">"Homo sapiens"</span>, taxadb_db <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span></code></pre></div>
<p>Users can also call the <code><a href="../reference/td_connect.html">td_connect()</a></code> function to connect to <code>taxadb</code>’s default databases. Running <code><a href="../reference/td_connect.html">td_connect()</a></code> with no arguments will return the current default connection. This is a convenient way to confirm that your system is using the database engine you intended it to use. You can also use that connection to interact directly with the <code>taxadb</code> databases (e.g. using <code>dplyr</code> or <code>DBI</code> functions).</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
