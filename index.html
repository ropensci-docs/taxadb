<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Creates a local database of many commonly used taxonomic authorities
             and provides functions that can quickly query this data.">
<title>A High-Performance Local Taxonomic Database Interface • taxadb</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="A High-Performance Local Taxonomic Database Interface">
<meta property="og:description" content="Creates a local database of many commonly used taxonomic authorities
             and provides functions that can quickly query this data.">
<meta property="og:image" content="https://docs.ropensci.org/taxadb/logo.svg">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="index.html">taxadb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.1.99</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/intro.html">Tutorial for taxadb</a>
    <a class="dropdown-item" href="articles/backends.html">Backends for taxadb</a>
    <a class="dropdown-item" href="articles/data-sources.html">Name Providers and schema used in taxadb</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/taxadb/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="taxadb-">taxadb <a class="anchor" aria-label="anchor" href="#taxadb-"></a>
</h1>
</div>
<!-- badges: start -->
<p>The goal of <code>taxadb</code> is to provide <em>fast</em>, <em>consistent</em> access to taxonomic data, supporting common tasks such as resolving taxonomic names to identifiers, looking up higher classification ranks of given species, or returning a list of all species below a given rank. These tasks are particularly common when synthesizing data across large species assemblies, such as combining occurrence records with trait records.</p>
<p>Existing approaches to these problems typically rely on web APIs, which can make them impractical for work with large numbers of species or in more complex pipelines. Queries and returned formats also differ across the different taxonomic authorities, making tasks that query multiple authorities particularly complex. <code>taxadb</code> creates a <em>local</em> database of most readily available taxonomic authorities, each of which is transformed into consistent, standard, and researcher-friendly tabular formats.</p>
<div class="section level2">
<h2 id="install-and-initial-setup">Install and initial setup<a class="anchor" aria-label="anchor" href="#install-and-initial-setup"></a>
</h2>
<p>To get started, install from CRAN</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"taxadb"</span><span class="op">)</span></span></code></pre></div>
<p>or install the development version directly from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ropensci/taxadb"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">taxadb</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># Used to illustrate how a typical workflow combines nicely with `dplyr`</span></span></code></pre></div>
<p>Create a local copy of the (current) Catalogue of Life database:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/td_create.html">td_create</a></span><span class="op">(</span><span class="st">"col"</span><span class="op">)</span></span></code></pre></div>
<p>Read in the species list used by the Breeding Bird Survey:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbs_species_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/bbs.tsv"</span>, package<span class="op">=</span><span class="st">"taxadb"</span><span class="op">)</span></span>
<span><span class="va">bbs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.delim</a></span><span class="op">(</span><span class="va">bbs_species_list</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-names-and-ids">Getting names and ids<a class="anchor" aria-label="anchor" href="#getting-names-and-ids"></a>
</h2>
<p>Two core functions are <code><a href="reference/get_ids.html">get_ids()</a></code> and <code><a href="reference/get_names.html">get_names()</a></code>. These functions take a vector of names or ids (respectively), and return a vector of ids or names (respectively). For instance, we can use this to attempt to resolve all the bird names in the Breeding Bird Survey against the Catalogue of Life:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">birds</span> <span class="op">&lt;-</span> <span class="va">bbs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="reference/get_ids.html">get_ids</a></span><span class="op">(</span><span class="va">species</span>, <span class="st">"col"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(scientificName)`</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">birds</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;                          species        id</span></span>
<span><span class="co">#&gt; 1         Dendrocygna autumnalis COL:34Q2Z</span></span>
<span><span class="co">#&gt; 2            Dendrocygna bicolor COL:34Q32</span></span>
<span><span class="co">#&gt; 3                Anser canagicus      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4             Anser caerulescens      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5  Chen caerulescens (blue form)      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6                   Anser rossii      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7                Anser albifrons COL:679WV</span></span>
<span><span class="co">#&gt; 8                Branta bernicla  COL:N749</span></span>
<span><span class="co">#&gt; 9      Branta bernicla nigricans      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 10             Branta hutchinsii  COL:N74B</span></span></code></pre></div>
<p>Note that some names cannot be resolved to an identifier. This can occur because of miss-spellings, non-standard formatting, or the use of a synonym not recognized by the naming provider. Names that cannot be uniquely resolved because they are known synonyms of multiple different species will also return <code>NA</code>. The <code>filter_name</code> filtering functions can help us resolve this last case (see below).</p>
<p><code><a href="reference/get_ids.html">get_ids()</a></code> returns the IDs of accepted names, that is <code>dwc:AcceptedNameUsageID</code>s. We can resolve the IDs into accepted names:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">birds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>accepted_name <span class="op">=</span> <span class="fu"><a href="reference/get_names.html">get_names</a></span><span class="op">(</span><span class="va">id</span>, <span class="st">"col"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                         species        id          accepted_name</span></span>
<span><span class="co">#&gt; 1        Dendrocygna autumnalis COL:34Q2Z Dendrocygna autumnalis</span></span>
<span><span class="co">#&gt; 2           Dendrocygna bicolor COL:34Q32    Dendrocygna bicolor</span></span>
<span><span class="co">#&gt; 3               Anser canagicus      &lt;NA&gt;                   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4            Anser caerulescens      &lt;NA&gt;                   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5 Chen caerulescens (blue form)      &lt;NA&gt;                   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6                  Anser rossii      &lt;NA&gt;                   &lt;NA&gt;</span></span></code></pre></div>
<p>This illustrates that some of our names, e.g. <em>Dendrocygna bicolor</em> are accepted in the Catalogue of Life, while others, <em>Anser canagicus</em> are <strong>known synonyms</strong> of a different accepted name: <strong>Chen canagica</strong>. Resolving synonyms and accepted names to identifiers helps us avoid the possible miss-matches we could have when the same species is known by two different names.</p>
</div>
<div class="section level2">
<h2 id="taxonomic-data-tables">Taxonomic Data Tables<a class="anchor" aria-label="anchor" href="#taxonomic-data-tables"></a>
</h2>
<p>Local access to taxonomic data tables lets us do much more than look up names and ids. A family of <code>filter_*</code> functions in <code>taxadb</code> help us work directly with subsets of the taxonomic data. As we noted above, this can be useful in resolving certain ambiguous names.</p>
<p>For instance, <em>Agrostis caespitosa</em> does not resolve to an identifier in ITIS:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_ids.html">get_ids</a></span><span class="op">(</span><span class="st">"Agrostis caespitosa"</span>, <span class="st">"itis"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Joining with `by = join_by(scientificName)`</span></span>
<span><span class="co">#&gt; Warning:   Found 5 possible identifiers for Agrostis caespitosa.</span></span>
<span><span class="co">#&gt;   Returning NA. Try filter_name('Agrostis caespitosa', '') to resolve manually.</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>Using <code><a href="reference/filter_name.html">filter_name()</a></code>, we find this is because the name resolves not to zero matches, but is a known synonym to more than one accepted name (as indicated by the accepted name usage id)</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/filter_name.html">filter_name</a></span><span class="op">(</span><span class="st">'Agrostis caespitosa'</span>, <span class="st">'itis'</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 15</span></span>
<span><span class="co">#&gt;   taxonID     scien…¹ taxon…² accep…³ taxon…⁴ updat…⁵ kingdom phylum class order</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 ITIS:785430 Agrost… species ITIS:5… synonym 2010-1… Plantae &lt;NA&gt;   Magn… Poal…</span></span>
<span><span class="co">#&gt; 2 ITIS:785431 Agrost… species ITIS:4… synonym 2010-1… Plantae &lt;NA&gt;   Magn… Poal…</span></span>
<span><span class="co">#&gt; 3 ITIS:785432 Agrost… species ITIS:4… synonym 2010-1… Plantae &lt;NA&gt;   Magn… Poal…</span></span>
<span><span class="co">#&gt; 4 ITIS:785433 Agrost… species ITIS:7… synonym 2010-1… Plantae &lt;NA&gt;   Magn… Poal…</span></span>
<span><span class="co">#&gt; 5 ITIS:785434 Agrost… species ITIS:5… synonym 2010-1… Plantae &lt;NA&gt;   Magn… Poal…</span></span>
<span><span class="co">#&gt; 6 ITIS:785435 Agrost… species ITIS:7… synonym 2010-1… Plantae &lt;NA&gt;   Magn… Poal…</span></span>
<span><span class="co">#&gt; # … with 5 more variables: family &lt;chr&gt;, genus &lt;chr&gt;, specificEpithet &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   infraspecificEpithet &lt;chr&gt;, vernacularName &lt;chr&gt;, and abbreviated variable</span></span>
<span><span class="co">#&gt; #   names ¹​scientificName, ²​taxonRank, ³​acceptedNameUsageID, ⁴​taxonomicStatus,</span></span>
<span><span class="co">#&gt; #   ⁵​update_date</span></span></code></pre></div>
<p>We can resolve the scientific name to the acceptedNameUsage using <code><a href="reference/get_names.html">get_names()</a></code> on the <em>accepted</em> IDs: (These also correspond to the genus and specificEpithet column, as the classification is always given only based on acceptedNameUsageID).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/filter_name.html">filter_name</a></span><span class="op">(</span><span class="st">"Agrostis caespitosa"</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>acceptedNameUsage <span class="op">=</span> <span class="fu"><a href="reference/get_names.html">get_names</a></span><span class="op">(</span><span class="va">acceptedNameUsageID</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">scientificName</span>, <span class="va">taxonomicStatus</span>, <span class="va">acceptedNameUsage</span>, <span class="va">acceptedNameUsageID</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span><span class="co">#&gt;   scientificName      taxonomicStatus acceptedNameUsage          acceptedNameU…¹</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;               &lt;chr&gt;           &lt;chr&gt;                      &lt;chr&gt;          </span></span>
<span><span class="co">#&gt; 1 Agrostis caespitosa synonym         Deschampsia cespitosa      ITIS:502001    </span></span>
<span><span class="co">#&gt; 2 Agrostis caespitosa synonym         Agrostis stolonifera       ITIS:40400     </span></span>
<span><span class="co">#&gt; 3 Agrostis caespitosa synonym         Agrostis stolonifera       ITIS:40400     </span></span>
<span><span class="co">#&gt; 4 Agrostis caespitosa synonym         Calamagrostis preslii      ITIS:782718    </span></span>
<span><span class="co">#&gt; 5 Agrostis caespitosa synonym         Muhlenbergia torreyi       ITIS:503886    </span></span>
<span><span class="co">#&gt; 6 Agrostis caespitosa synonym         Muhlenbergia quadridentata ITIS:783883    </span></span>
<span><span class="co">#&gt; # … with abbreviated variable name ¹​acceptedNameUsageID</span></span></code></pre></div>
<p>Similar functions <code>filter_id</code>, <code>filter_rank</code>, and <code>filter_common</code> take IDs, scientific ranks, or common names, respectively. Here, we can get taxonomic data on all bird names in the Catalogue of Life:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/filter_rank.html">filter_rank</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Aves"</span>, rank <span class="op">=</span> <span class="st">"class"</span>, provider <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10,598 × 25</span></span>
<span><span class="co">#&gt;    taxonID   accepte…¹ scien…² taxon…³ taxon…⁴ kingdom phylum class order family</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; </span></span>
<span><span class="co">#&gt;  1 COL:59ZVZ COL:59ZVZ Tyto l… accept… species Animal… Chord… Aves  Stri… Tyton…</span></span>
<span><span class="co">#&gt;  2 COL:64X3G COL:64X3G Aegoli… accept… species Animal… Chord… Aves  Stri… Strig…</span></span>
<span><span class="co">#&gt;  3 COL:5XGW7 COL:5XGW7 Celeus… accept… species Animal… Chord… Aves  Pici… Picid…</span></span>
<span><span class="co">#&gt;  4 COL:4NGTM COL:4NGTM Psepho… accept… species Animal… Chord… Aves  Psit… Psitt…</span></span>
<span><span class="co">#&gt;  5 COL:3C9TF COL:3C9TF Eulamp… accept… species Animal… Chord… Aves  Apod… Troch…</span></span>
<span><span class="co">#&gt;  6 COL:6CZN3 COL:6CZN3 Discos… accept… species Animal… Chord… Aves  Apod… Troch…</span></span>
<span><span class="co">#&gt;  7 COL:4S4FP COL:4S4FP Rhaphi… accept… species Animal… Chord… Aves  Apod… Apodi…</span></span>
<span><span class="co">#&gt;  8 COL:7TCSL COL:7TCSL Dryoba… accept… species Animal… Chord… Aves  Pici… Picid…</span></span>
<span><span class="co">#&gt;  9 COL:3HT3X COL:3HT3X Gymnop… accept… species Animal… Chord… Aves  Colu… Colum…</span></span>
<span><span class="co">#&gt; 10 COL:3Z72J COL:3Z72J Melane… accept… species Animal… Chord… Aves  Pici… Picid…</span></span>
<span><span class="co">#&gt; # … with 10,588 more rows, 15 more variables: genus &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   specificEpithet &lt;chr&gt;, infraspecificEpithet &lt;chr&gt;, cultivarEpithet &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   datasetID &lt;chr&gt;, namePublishedIn &lt;chr&gt;, nameAccordingTo &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   taxonRemarks &lt;chr&gt;, nomenclaturalStatus &lt;chr&gt;, nomenclaturalCode &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   parentNameUsageID &lt;chr&gt;, originalNameUsageID &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   `dcterms:references` &lt;chr&gt;, language &lt;chr&gt;, vernacularName &lt;chr&gt;, and</span></span>
<span><span class="co">#&gt; #   abbreviated variable names ¹​acceptedNameUsageID, ²​scientificName, …</span></span></code></pre></div>
<p>Combining these with <code>dplyr</code> functions can make it easy to explore this data: for instance, which families have the most species?</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/filter_rank.html">filter_rank</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Aves"</span>, rank <span class="op">=</span> <span class="st">"class"</span>, provider <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">taxonomicStatus</span> <span class="op">==</span> <span class="st">"accepted"</span>, <span class="va">taxonRank</span><span class="op">==</span><span class="st">"species"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">family</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span>sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 2</span></span>
<span><span class="co">#&gt; # Groups:   family [6]</span></span>
<span><span class="co">#&gt;   family           n</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 Tyrannidae     401</span></span>
<span><span class="co">#&gt; 2 Thraupidae     374</span></span>
<span><span class="co">#&gt; 3 Psittacidae    370</span></span>
<span><span class="co">#&gt; 4 Trochilidae    361</span></span>
<span><span class="co">#&gt; 5 Columbidae     344</span></span>
<span><span class="co">#&gt; 6 Muscicapidae   314</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-the-database-connection-directly">Using the database connection directly<a class="anchor" aria-label="anchor" href="#using-the-database-connection-directly"></a>
</h2>
<p><code>filter_*</code> functions by default return in-memory data frames. Because they are filtering functions, they return a subset of the full data which matches a given query (names, ids, ranks, etc), so the returned data.frames are smaller than the full record of a naming provider. Working directly with the SQL connection to the MonetDBLite database gives us access to all the data. The <code><a href="reference/taxa_tbl.html">taxa_tbl()</a></code> function provides this connection:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/taxa_tbl.html">taxa_tbl</a></span><span class="op">(</span><span class="st">"col"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Source:   table&lt;v22.12_dwc_col&gt; [?? x 25]</span></span>
<span><span class="co">#&gt; # Database: DuckDB 0.7.0 [unknown@Linux 5.17.15-76051715-generic:R 4.2.2/:memory:]</span></span>
<span><span class="co">#&gt;    taxonID   accepte…¹ scien…² taxon…³ taxon…⁴ kingdom phylum class order family</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; </span></span>
<span><span class="co">#&gt;  1 COL:3L3RS COL:3L3RS Hersil… accept… species Animal… Arthr… &lt;NA&gt;  Aran… Hersi…</span></span>
<span><span class="co">#&gt;  2 COL:6MTNS COL:6MTNS Idiotr… accept… species Animal… Arthr… Inse… Hemi… Helot…</span></span>
<span><span class="co">#&gt;  3 COL:39VC7 COL:39VC7 Enitha… accept… species Animal… Arthr… Inse… Hemi… Noton…</span></span>
<span><span class="co">#&gt;  4 COL:6LHWM COL:6LHWM Heleoc… accept… species Animal… Arthr… Inse… Hemi… Nauco…</span></span>
<span><span class="co">#&gt;  5 COL:38PQV COL:38PQV Ectemn… accept… species Animal… Arthr… Inse… Hemi… Corix…</span></span>
<span><span class="co">#&gt;  6 COL:73VN6 COL:73VN6 Neomac… accept… species Animal… Arthr… Inse… Hemi… Nauco…</span></span>
<span><span class="co">#&gt;  7 COL:6MKPW COL:6MKPW Hydrot… accept… species Animal… Arthr… Inse… Hemi… Helot…</span></span>
<span><span class="co">#&gt;  8 COL:5FMGW COL:5FMGW rotumai accept… subspe… &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  </span></span>
<span><span class="co">#&gt;  9 COL:3L5C7 COL:3L5C7 Hesper… accept… species Animal… Arthr… Inse… Hemi… Corix…</span></span>
<span><span class="co">#&gt; 10 COL:SVTT  COL:SVTT  Cercot… accept… species Animal… Arthr… Inse… Hemi… Nepid…</span></span>
<span><span class="co">#&gt; # … with more rows, 15 more variables: genus &lt;chr&gt;, specificEpithet &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   infraspecificEpithet &lt;chr&gt;, cultivarEpithet &lt;chr&gt;, datasetID &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   namePublishedIn &lt;chr&gt;, nameAccordingTo &lt;chr&gt;, taxonRemarks &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   nomenclaturalStatus &lt;chr&gt;, nomenclaturalCode &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   parentNameUsageID &lt;chr&gt;, originalNameUsageID &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   `dcterms:references` &lt;chr&gt;, language &lt;chr&gt;, vernacularName &lt;chr&gt;, and</span></span>
<span><span class="co">#&gt; #   abbreviated variable names ¹​acceptedNameUsageID, ²​scientificName, …</span></span></code></pre></div>
<p>We can still use most familiar <code>dplyr</code> verbs to perform common tasks. For instance: which species has the most known synonyms?</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/taxa_tbl.html">taxa_tbl</a></span><span class="op">(</span><span class="st">"itis"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">acceptedNameUsageID</span>, sort<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Source:     SQL [?? x 2]</span></span>
<span><span class="co">#&gt; # Database:   DuckDB 0.7.0 [unknown@Linux 5.17.15-76051715-generic:R 4.2.2/:memory:]</span></span>
<span><span class="co">#&gt; # Ordered by: desc(n)</span></span>
<span><span class="co">#&gt;    acceptedNameUsageID     n</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;               &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 ITIS:50               462</span></span>
<span><span class="co">#&gt;  2 ITIS:983681           303</span></span>
<span><span class="co">#&gt;  3 ITIS:983691           286</span></span>
<span><span class="co">#&gt;  4 ITIS:983714           237</span></span>
<span><span class="co">#&gt;  5 ITIS:983710           231</span></span>
<span><span class="co">#&gt;  6 ITIS:798259           145</span></span>
<span><span class="co">#&gt;  7 ITIS:24921            144</span></span>
<span><span class="co">#&gt;  8 ITIS:527684           134</span></span>
<span><span class="co">#&gt;  9 ITIS:505191           126</span></span>
<span><span class="co">#&gt; 10 ITIS:504874           123</span></span>
<span><span class="co">#&gt; # … with more rows</span></span></code></pre></div>
<p>However, unlike the <code>filter_*</code> functions which return convenient in-memory tables, this is still a remote connection. This means that direct access using the <code><a href="reference/taxa_tbl.html">taxa_tbl()</a></code> function (or directly accessing the database connection using <code><a href="reference/td_connect.html">td_connect()</a></code>) is more low-level and requires greater care. For instance, we cannot just add a <code>%&gt;% mutate(acceptedNameUsage = get_names(acceptedNameUsageID))</code> to the above, because <code>get_names</code> does not work on a remote collection. Instead, we would first need to use a <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code> to pull the summary table into memory. Users familiar with remote databases in <code>dplyr</code> will find using <code><a href="reference/taxa_tbl.html">taxa_tbl()</a></code> directly to be convenient and fast, while other users may find the <code>filter_*</code> approach to be more intuitive.</p>
</div>
<div class="section level2">
<h2 id="learn-more">Learn more<a class="anchor" aria-label="anchor" href="#learn-more"></a>
</h2>
<ul>
<li><p>See richer examples the package <a href="https://docs.ropensci.org/taxadb/articles/articles/intro.html">Tutorial</a>.</p></li>
<li><p>Learn about the underlying data sources and formats in <a href="https://docs.ropensci.org/taxadb/articles/data-sources.html">Data Sources</a></p></li>
<li><p>Get better performance by selecting an alternative <a href="https://docs.ropensci.org/taxadb/articles/backends.html">database backend</a> engines.</p></li>
</ul>
<hr>
<p>Please note that this project is released with a <a href="https://ropensci.org/code-of-conduct/" class="external-link">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=taxadb" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/ropensci/taxadb/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ropensci/taxadb/issues" class="external-link">Report a bug</a></li>
</ul>
</div>



<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing taxadb</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Carl Boettiger <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1642-628X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Kari Norman <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-2029-2325" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Jorrit Poelen <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-3138-4118" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://scottchamberlain.info/" class="external-link">Scott Chamberlain</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-1444-9135" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="r-universe">
<h2 data-toc-skip>R-universe</h2>
<ul class="list-unstyled">
<li><p><a href="https://ropensci.r-universe.dev/taxadb" class="external-link"><img src="https://ropensci.r-universe.dev/badges/taxadb" alt="taxadb status badge"></a></p></li>
</ul>
</div>

  </aside>
</div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
